<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>EchoSphere - Thêm Playlist</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/390e5be97b.js" crossorigin="anonymous"></script>
    <style>
        #now-playing-bar {
            grid-area: now-playing-bar;
            background-color: #181818;
            border-top: 1px solid #282828;
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 10;
            height: 80px;
        }
        .filter-btn-active {
            background-color: #5b21b6;
            color: white;
        }
        .grid {
            display: grid !important;
        }
        .container {
            max-width: 100% !important;
            overflow-x: hidden !important;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-700 via-blue-400 to-gray-900 text-white flex flex-col min-h-screen">
<!-- Sidebar -->
<div th:insert="~{fragments/sidebar :: mainSidebar}"></div>

<!-- Header -->
<div th:insert="~{fragments/header :: mainHeader}"></div>

<!-- Main Content -->
<main class="container mx-auto p-4 pt-20 ml-0 md:ml-64 flex-1 bg-gray-800 shadow-md rounded-lg pb-20 min-w-0">
    <section>
        <h2 class="text-2xl md:text-3xl font-bold mb-6" style="font-family: 'Poppins', sans-serif;">Thêm Playlist Mới</h2>

        <!-- Success/Error Messages -->
        <div th:if="${successMessage}" class="mb-4 p-4 bg-green-100 text-green-800 rounded-lg flex items-center">
            <i class="fas fa-check-circle mr-2"></i>
            <span th:text="${successMessage}"></span>
        </div>
        <div th:if="${errorMessage}" class="mb-4 p-4 bg-red-100 text-red-800 rounded-lg flex items-center">
            <i class="fas fa-exclamation-circle mr-2"></i>
            <span th:text="${errorMessage}"></span>
        </div>

        <!-- Form -->
        <form th:action="@{/playlists/add}" th:object="${playlistForm}" method="post" enctype="multipart/form-data" class="bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-700">
            <!-- Hidden ID -->
            <input th:field="*{id}" type="hidden" id="id" name="id">

            <!-- Playlist Name -->
            <div class="mb-4">
                <label for="namePlaylist" class="block text-sm font-medium text-gray-300 mb-2" style="font-family: 'Poppins', sans-serif;">Tên Playlist</label>
                <input th:field="*{namePlaylist}" type="text" id="namePlaylist" name="namePlaylist" class="w-full p-3 bg-gray-900 text-white rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-900" placeholder="Nhập tên playlist" required>
                <div th:if="${#fields.hasErrors('namePlaylist')}" class="text-red-500 text-sm mt-1" th:errors="*{namePlaylist}"></div>
            </div>

            <!-- Cover Image -->
            <div class="mb-4">
                <label for="coverImage" class="block text-sm font-medium text-gray-300 mb-2" style="font-family: 'Poppins', sans-serif;">Hình ảnh bìa</label>
                <input type="file" id="coverImage" name="coverImage" accept="image/*" class="w-full p-3 bg-gray-900 text-white rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-900">
                <p class="text-sm text-gray-500 mt-1">Hoặc nhập URL hình ảnh (tùy chọn):</p>
                <input th:field="*{playlistUrl}" type="url" id="playlistUrl" name="playlistUrl" class="w-full p-3 bg-gray-900 text-white rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-900 mt-2" placeholder="Nhập URL hình ảnh">
            </div>

            <!-- Public Status -->
            <div class="mb-4">
                <label class="flex items-center">
                    <input th:field="*{isPublic}" type="checkbox" name="isPublic" class="mr-2 h-4 w-4 text-purple-900 focus:ring-purple-900 border-gray-700 rounded" checked>
                    <span class="text-sm text-gray-300" style="font-family: 'Poppins', sans-serif;">Công khai playlist</span>
                </label>
            </div>

            <!-- Buttons -->
            <div class="flex justify-end space-x-4">
                <a th:href="@{/home}" class="px-6 py-3 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition-colors duration-200 text-sm md:text-base font-medium" style="font-family: 'Poppins', sans-serif;">Hủy</a>
                <button type="submit" class="px-6 py-3 bg-purple-900 text-white rounded-full hover:bg-purple-800 transition-colors duration-200 text-sm md:text-base font-medium" style="font-family: 'Poppins', sans-serif;">Tạo Playlist</button>
            </div>
        </form>
    </section>
</main>

<!-- Player -->
<div th:insert="~{fragments/playerbar :: mainPlayerBar}"></div>
</body>
</html>